---
import BlogCard from "@/components/BlogCard.astro";
import Layout from "@/layouts/Layout.astro";

import { getCollection } from "astro:content";
import {
  Pagination,
  PaginationContent,
  PaginationEllipsis,
  PaginationItem,
  PaginationLink,
  PaginationNext,
  PaginationPrevious,
} from "@/components/ui/pagination";
const currentPageNo = 0;
const totalPages = 0;
const generalBlog = await getCollection("generalBlog");
import {
  BLOG_NAME,
  BLOG_DESCRIPTION,
  BLOG_AUTHOR,
  BLOG_THUMBNAIL,
} from "@/const";
var allBlogPosts = [...generalBlog];

allBlogPosts = allBlogPosts.sort((a, b) => {
  return new Date(b.data.date).getTime() - new Date(a.data.date).getTime();
});

allBlogPosts = allBlogPosts.slice(0, 18);
---

<Layout
  navselect={"pages"}
  title={`Browse All Posts | ${BLOG_NAME}  `}
  description={BLOG_DESCRIPTION}
  keywords={"Ocean, Marine Science, Deep Sea"}
  ogImage={BLOG_THUMBNAIL}
>
  <section id="blog" class="">
    <div
      class="grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 gap-0 mx-auto mt-5"
    >
      {
        allBlogPosts.map(({ data }) => (
          <div class="p-1 md:p-3 max-w-md " id="blogPostCard">
            <BlogCard
              title={data.title}
              description={data.description}
              thumb={data.image}
              link={"/" + data.slug}
              date={data.date}
            />
          </div>
        ))
      }
    </div>
  </section>

  <section>
    <Pagination>
      <PaginationContent>
        <PaginationItem>
          <PaginationNext href={"/posts/2"} />
        </PaginationItem>
      </PaginationContent>
    </Pagination>
  </section>
</Layout>
